<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2016px" preserveAspectRatio="none" style="width:528px;height:2016px;background:#FFFFFF;" version="1.1" viewBox="0 0 528 2016" width="528px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="158.6641" style="stroke:#000000;stroke-width:1.5;" width="165.5" x="99.5" y="98.2969"/><rect fill="none" height="340.1328" style="stroke:#000000;stroke-width:1.5;" width="342.5" x="10" y="270.9609"/><rect fill="none" height="222.6016" style="stroke:#000000;stroke-width:1.5;" width="243" x="99.5" y="381.4922"/><rect fill="none" height="505.4688" style="stroke:#000000;stroke-width:1.5;" width="369.5" x="89.5" y="625.0938"/><rect fill="none" height="222.6016" style="stroke:#000000;stroke-width:1.5;" width="300.5" x="99.5" y="735.625"/><rect fill="none" height="109.2031" style="stroke:#000000;stroke-width:1.5;" width="176" x="252" y="1014.3594"/><rect fill="none" height="172.6641" style="stroke:#000000;stroke-width:1.5;" width="265" x="99.5" y="1144.5625"/><rect fill="none" height="332.1953" style="stroke:#000000;stroke-width:1.5;" width="263" x="89.5" y="1331.2266"/><rect fill="none" height="301.0625" style="stroke:#000000;stroke-width:1.5;" width="243" x="99.5" y="1355.3594"/><rect fill="none" height="240.9297" style="stroke:#000000;stroke-width:1.5;" width="432.5" x="89.5" y="1677.4219"/><rect fill="none" height="96.3984" style="stroke:#000000;stroke-width:1.5;" width="178.5" x="99.5" y="1814.9531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="39" x2="39" y1="81.2969" y2="1935.3516"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="152.5" x2="152.5" y1="81.2969" y2="1935.3516"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="302.5" x2="302.5" y1="81.2969" y2="1935.3516"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="454" x2="454" y1="81.2969" y2="1935.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="20" y="77.9951">User</text><ellipse cx="39" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M39,21.5 L39,48.5 M26,29.5 L52,29.5 M39,48.5 L26,63.5 M39,48.5 L52,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="20" y="1947.3467">User</text><ellipse cx="39" cy="1959.1484" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M39,1967.1484 L39,1994.1484 M26,1975.1484 L52,1975.1484 M39,1994.1484 L26,2009.1484 M39,1994.1484 L52,2009.1484 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87" x="109.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="116.5" y="69.9951">Requester</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87" x="109.5" y="1934.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="116.5" y="1954.3467">Requester</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="59" x="273.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="280.5" y="69.9951">Holder</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="59" x="273.5" y="1934.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="280.5" y="1954.3467">Holder</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="396" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="403" y="69.9951">2nd_requester</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="396" y="1934.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="403" y="1954.3467">2nd_requester</text><path d="M99.5,98.2969 L199.5,98.2969 L199.5,105.4297 L189.5,115.4297 L99.5,115.4297 L99.5,98.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="158.6641" style="stroke:#000000;stroke-width:1.5;" width="165.5" x="99.5" y="98.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="55" x="114.5" y="111.3638">Startup</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="136.5625" y2="136.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="136.5625" y2="149.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="149.5625" y2="149.5625"/><polygon fill="#181818" points="164,145.5625,154,149.5625,164,153.5625,160,149.5625" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="160" y="131.4966">Generate ID</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="193.8281" y2="193.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="193.8281" y2="206.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="206.8281" y2="206.8281"/><polygon fill="#181818" points="164,202.8281,154,206.8281,164,210.8281,160,206.8281" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="160" y="173.6294">Ramp up radio</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="160" y="188.7622">in RX</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="235.9609" y2="235.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="235.9609" y2="248.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="248.9609" y2="248.9609"/><polygon fill="#181818" points="164,244.9609,154,248.9609,164,252.9609,160,248.9609" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54" x="160" y="230.895">Init GPIO</text><path d="M10,270.9609 L138,270.9609 L138,278.0938 L128,288.0938 L10,288.0938 L10,270.9609 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="340.1328" style="stroke:#000000;stroke-width:1.5;" width="342.5" x="10" y="270.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="83" x="25" y="284.0278">User action</text><polygon fill="#181818" points="141,305.2266,151,309.2266,141,313.2266,145,309.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="39" x2="147" y1="309.2266" y2="309.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="46" y="304.1606">Button1 press</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="353.4922" y2="353.4922"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="353.4922" y2="366.4922"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="366.4922" y2="366.4922"/><polygon fill="#181818" points="164,362.4922,154,366.4922,164,370.4922,160,366.4922" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="160" y="333.2935">Check if</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="160" y="348.4263">holding LED1</text><path d="M99.5,381.4922 L163.5,381.4922 L163.5,388.625 L153.5,398.625 L99.5,398.625 L99.5,381.4922 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="222.6016" style="stroke:#000000;stroke-width:1.5;" width="243" x="99.5" y="381.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="114.5" y="394.5591">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="71" x="178.5" y="393.7026">[Holding 1]</text><path d="M112,403.625 L112,428.625 L194,428.625 L194,413.625 L184,403.625 L112,403.625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M184,403.625 L184,413.625 L194,413.625 L184,403.625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="118" y="420.6919">No action</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="99.5" x2="342.5" y1="434.7578" y2="434.7578"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="96" x="104.5" y="444.9683">[Not holding 1]</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="469.6953" y2="469.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="469.6953" y2="482.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="482.6953" y2="482.6953"/><polygon fill="#181818" points="164,478.6953,154,482.6953,164,486.6953,160,482.6953" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="160" y="464.6294">Switch to TX</text><polygon fill="#181818" points="291,507.8281,301,511.8281,291,515.8281,295,511.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="297" y1="511.8281" y2="511.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="160" y="506.7622">LED req(IDa, LED1)</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="540.9609" y2="540.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="540.9609" y2="553.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="553.9609" y2="553.9609"/><polygon fill="#181818" points="164,549.9609,154,553.9609,164,557.9609,160,553.9609" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="160" y="535.895">Switch to RX</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="583.0938" y2="583.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="583.0938" y2="596.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="596.0938" y2="596.0938"/><polygon fill="#181818" points="164,592.0938,154,596.0938,164,600.0938,160,596.0938" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="160" y="578.0278">Begin timer</text><path d="M89.5,625.0938 L311.5,625.0938 L311.5,632.2266 L301.5,642.2266 L89.5,642.2266 L89.5,625.0938 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="505.4688" style="stroke:#000000;stroke-width:1.5;" width="369.5" x="89.5" y="625.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="177" x="104.5" y="638.1606">Holder receives request</text><polygon fill="#181818" points="291,659.3594,301,663.3594,291,667.3594,295,663.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="297" y1="663.3594" y2="663.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="160" y="658.2935">LED req(IDa, LED1)</text><line style="stroke:#181818;stroke-width:1.0;" x1="303" x2="345" y1="707.625" y2="707.625"/><line style="stroke:#181818;stroke-width:1.0;" x1="345" x2="345" y1="707.625" y2="720.625"/><line style="stroke:#181818;stroke-width:1.0;" x1="304" x2="345" y1="720.625" y2="720.625"/><polygon fill="#181818" points="314,716.625,304,720.625,314,724.625,310,720.625" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="310" y="687.4263">Check if</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="310" y="702.5591">holding LED1</text><path d="M99.5,735.625 L163.5,735.625 L163.5,742.7578 L153.5,752.7578 L99.5,752.7578 L99.5,735.625 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="222.6016" style="stroke:#000000;stroke-width:1.5;" width="300.5" x="99.5" y="735.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="114.5" y="748.6919">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="71" x="178.5" y="747.8354">[Holding 1]</text><line style="stroke:#181818;stroke-width:1.0;" x1="303" x2="345" y1="773.8906" y2="773.8906"/><line style="stroke:#181818;stroke-width:1.0;" x1="345" x2="345" y1="773.8906" y2="786.8906"/><line style="stroke:#181818;stroke-width:1.0;" x1="304" x2="345" y1="786.8906" y2="786.8906"/><polygon fill="#181818" points="314,782.8906,304,786.8906,314,790.8906,310,786.8906" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="310" y="768.8247">LED1 off</text><line style="stroke:#181818;stroke-width:1.0;" x1="303" x2="345" y1="816.0234" y2="816.0234"/><line style="stroke:#181818;stroke-width:1.0;" x1="345" x2="345" y1="816.0234" y2="829.0234"/><line style="stroke:#181818;stroke-width:1.0;" x1="304" x2="345" y1="829.0234" y2="829.0234"/><polygon fill="#181818" points="314,825.0234,304,829.0234,314,833.0234,310,829.0234" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="310" y="810.9575">Switch to TX</text><polygon fill="#181818" points="164,854.1563,154,858.1563,164,862.1563,160,858.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="158" x2="302" y1="858.1563" y2="858.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="170" y="853.0903">LED res(IDa, LED1)</text><line style="stroke:#181818;stroke-width:1.0;" x1="303" x2="345" y1="887.2891" y2="887.2891"/><line style="stroke:#181818;stroke-width:1.0;" x1="345" x2="345" y1="887.2891" y2="900.2891"/><line style="stroke:#181818;stroke-width:1.0;" x1="304" x2="345" y1="900.2891" y2="900.2891"/><polygon fill="#181818" points="314,896.2891,304,900.2891,314,904.2891,310,900.2891" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="310" y="882.2231">Switch to RX</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="99.5" x2="400" y1="909.2891" y2="909.2891"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="96" x="104.5" y="919.4995">[Not holding 1]</text><path d="M262,928.0938 L262,953.0938 L344,953.0938 L344,938.0938 L334,928.0938 L262,928.0938 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M334,928.0938 L334,938.0938 L344,938.0938 L334,928.0938 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="268" y="945.1606">No action</text><line style="stroke:#181818;stroke-width:1.0;" x1="303" x2="345" y1="986.3594" y2="986.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="345" x2="345" y1="986.3594" y2="999.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="304" x2="345" y1="999.3594" y2="999.3594"/><polygon fill="#181818" points="314,995.3594,304,999.3594,314,1003.3594,310,999.3594" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="310" y="981.2935">Compare IDa and IDb</text><path d="M252,1014.3594 L316,1014.3594 L316,1021.4922 L306,1031.4922 L252,1031.4922 L252,1014.3594 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="109.2031" style="stroke:#000000;stroke-width:1.5;" width="176" x="252" y="1014.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="267" y="1027.4263">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="78" x="331" y="1026.5698">[IDa == IDb]</text><line style="stroke:#181818;stroke-width:1.0;" x1="303" x2="345" y1="1052.625" y2="1052.625"/><line style="stroke:#181818;stroke-width:1.0;" x1="345" x2="345" y1="1052.625" y2="1065.625"/><line style="stroke:#181818;stroke-width:1.0;" x1="304" x2="345" y1="1065.625" y2="1065.625"/><polygon fill="#181818" points="314,1061.625,304,1065.625,314,1069.625,310,1065.625" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="310" y="1047.5591">Generate new ID</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="252" x2="428" y1="1074.625" y2="1074.625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="74" x="257" y="1084.8354">[IDa != IDb]</text><path d="M262,1093.4297 L262,1118.4297 L344,1118.4297 L344,1103.4297 L334,1093.4297 L262,1093.4297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M334,1093.4297 L334,1103.4297 L344,1103.4297 L334,1093.4297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="268" y="1110.4966">No action</text><path d="M99.5,1144.5625 L359.5,1144.5625 L359.5,1151.6953 L349.5,1161.6953 L99.5,1161.6953 L99.5,1144.5625 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="172.6641" style="stroke:#000000;stroke-width:1.5;" width="265" x="99.5" y="1144.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="215" x="114.5" y="1157.6294">Requester receives response</text><polygon fill="#181818" points="164,1178.8281,154,1182.8281,164,1186.8281,160,1182.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="158" x2="302" y1="1182.8281" y2="1182.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="170" y="1177.7622">LED res(IDa, LED1)</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1211.9609" y2="1211.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1211.9609" y2="1224.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1224.9609" y2="1224.9609"/><polygon fill="#181818" points="164,1220.9609,154,1224.9609,164,1228.9609,160,1224.9609" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="160" y="1206.895">LED1 on</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1254.0938" y2="1254.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1254.0938" y2="1267.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1267.0938" y2="1267.0938"/><polygon fill="#181818" points="164,1263.0938,154,1267.0938,164,1271.0938,160,1267.0938" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="160" y="1249.0278">Cancel timer</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1296.2266" y2="1296.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1296.2266" y2="1309.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1309.2266" y2="1309.2266"/><polygon fill="#181818" points="164,1305.2266,154,1309.2266,164,1313.2266,160,1309.2266" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="160" y="1291.1606">Reset retries</text><path d="M89.5,1331.2266 L237.5,1331.2266 L237.5,1338.3594 L227.5,1348.3594 L89.5,1348.3594 L89.5,1331.2266 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="332.1953" style="stroke:#000000;stroke-width:1.5;" width="263" x="89.5" y="1331.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="103" x="104.5" y="1344.2935">Timer timeout</text><path d="M99.5,1355.3594 L163.5,1355.3594 L163.5,1362.4922 L153.5,1372.4922 L99.5,1372.4922 L99.5,1355.3594 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="301.0625" style="stroke:#000000;stroke-width:1.5;" width="243" x="99.5" y="1355.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="114.5" y="1368.4263">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="80" x="178.5" y="1367.5698">[Retries &lt; 3]</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1393.625" y2="1393.625"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1393.625" y2="1406.625"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1406.625" y2="1406.625"/><polygon fill="#181818" points="164,1402.625,154,1406.625,164,1410.625,160,1406.625" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="160" y="1388.5591">Switch to TX</text><polygon fill="#181818" points="291,1431.7578,301,1435.7578,291,1439.7578,295,1435.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="297" y1="1435.7578" y2="1435.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="160" y="1430.6919">LED req(IDa, LED1)</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1464.8906" y2="1464.8906"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1464.8906" y2="1477.8906"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1477.8906" y2="1477.8906"/><polygon fill="#181818" points="164,1473.8906,154,1477.8906,164,1481.8906,160,1477.8906" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="160" y="1459.8247">Switch to RX</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1507.0234" y2="1507.0234"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1507.0234" y2="1520.0234"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1520.0234" y2="1520.0234"/><polygon fill="#181818" points="164,1516.0234,154,1520.0234,164,1524.0234,160,1520.0234" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="160" y="1501.9575">Begin timer</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1549.1563" y2="1549.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1549.1563" y2="1562.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1562.1563" y2="1562.1563"/><polygon fill="#181818" points="164,1558.1563,154,1562.1563,164,1566.1563,160,1562.1563" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="160" y="1544.0903">Increment retries</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="99.5" x2="342.5" y1="1571.1563" y2="1571.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1593.2891" y2="1593.2891"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1593.2891" y2="1606.2891"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1606.2891" y2="1606.2891"/><polygon fill="#181818" points="164,1602.2891,154,1606.2891,164,1610.2891,160,1606.2891" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="160" y="1588.2231">LED1 on</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1635.4219" y2="1635.4219"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1635.4219" y2="1648.4219"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1648.4219" y2="1648.4219"/><polygon fill="#181818" points="164,1644.4219,154,1648.4219,164,1652.4219,160,1648.4219" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="160" y="1630.356">Reset retries</text><path d="M89.5,1677.4219 L395.5,1677.4219 L395.5,1684.5547 L385.5,1694.5547 L89.5,1694.5547 L89.5,1677.4219 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="240.9297" style="stroke:#000000;stroke-width:1.5;" width="432.5" x="89.5" y="1677.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="261" x="104.5" y="1690.4888">Requester detects another request</text><polygon fill="#181818" points="164,1711.6875,154,1715.6875,164,1719.6875,160,1715.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="158" x2="453" y1="1715.6875" y2="1715.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="170" y="1710.6216">LED req(IDc, LED1)</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1744.8203" y2="1744.8203"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1744.8203" y2="1757.8203"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1757.8203" y2="1757.8203"/><polygon fill="#181818" points="164,1753.8203,154,1757.8203,164,1761.8203,160,1757.8203" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="160" y="1739.7544">Drop request</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1786.9531" y2="1786.9531"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1786.9531" y2="1799.9531"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1799.9531" y2="1799.9531"/><polygon fill="#181818" points="164,1795.9531,154,1799.9531,164,1803.9531,160,1799.9531" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="160" y="1781.8872">Compare IDa and IDc</text><path d="M99.5,1814.9531 L163.5,1814.9531 L163.5,1822.0859 L153.5,1832.0859 L99.5,1832.0859 L99.5,1814.9531 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="96.3984" style="stroke:#000000;stroke-width:1.5;" width="178.5" x="99.5" y="1814.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="114.5" y="1828.02">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77" x="178.5" y="1827.1636">[IDa == IDc]</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1853.2188" y2="1853.2188"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1853.2188" y2="1866.2188"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1866.2188" y2="1866.2188"/><polygon fill="#181818" points="164,1862.2188,154,1866.2188,164,1870.2188,160,1866.2188" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="160" y="1848.1528">Generate new ID</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="99.5" x2="278" y1="1875.2188" y2="1875.2188"/><path d="M112,1881.2188 L112,1906.2188 L194,1906.2188 L194,1891.2188 L184,1881.2188 L112,1881.2188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M184,1881.2188 L184,1891.2188 L194,1891.2188 L184,1881.2188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="118" y="1898.2856">No action</text><!--MD5=[5f7327a35bfe35ea47dd37c9c59084f9]
@startuml sequence-diagram

actor User
participant Requester as a
participant Holder as b
participant 2nd_requester as c

group Startup
    a -> a: Generate ID
    a -> a: Ramp up radio\nin RX
    a -> a: Init GPIO
end

group User action
    User -> a: Button1 press
    a -> a: Check if\nholding LED1

    alt Holding 1
        note over a: No action
    else Not holding 1
        a -> a: Switch to TX
        a -> b: LED req(IDa, LED1)
        a -> a: Switch to RX
        a -> a: Begin timer
    end

end

group Holder receives request
    a -> b: LED req(IDa, LED1)
    b -> b: Check if\nholding LED1

    alt Holding 1
        b -> b: LED1 off
        b -> b: Switch to TX
        b -> a: LED res(IDa, LED1)
        b -> b: Switch to RX
    else Not holding 1
        note over b: No action
    end

    b -> b: Compare IDa and IDb

    alt IDa == IDb
        b -> b: Generate new ID
    else IDa != IDb
        note over b: No action
    end

end

group Requester receives response
    b -> a: LED res(IDa, LED1)
    a -> a: LED1 on
    a -> a: Cancel timer
    a -> a: Reset retries
end

group Timer timeout

    alt Retries < 3
        a -> a: Switch to TX
        a -> b: LED req(IDa, LED1)
        a -> a: Switch to RX
        a -> a: Begin timer
        a -> a: Increment retries
    else
        a -> a: LED1 on
        a -> a: Reset retries
    end
    
end

group Requester detects another request
    c -> a: LED req(IDc, LED1)
    a -> a: Drop request
    a -> a: Compare IDa and IDc

    alt IDa == IDc
        a -> a: Generate new ID
    else
        note over a: No action
    end

end

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>