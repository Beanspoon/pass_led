<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1680px" preserveAspectRatio="none" style="width:461px;height:1680px;background:#FFFFFF;" version="1.1" viewBox="0 0 461 1680" width="461px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="59.2656" style="stroke:#000000;stroke-width:1.5;" width="129" x="120" y="98.2969"/><rect fill="none" height="340.1328" style="stroke:#000000;stroke-width:1.5;" width="330" x="10" y="171.5625"/><rect fill="none" height="222.6016" style="stroke:#000000;stroke-width:1.5;" width="228" x="102" y="282.0938"/><rect fill="none" height="650.8047" style="stroke:#000000;stroke-width:1.5;" width="345" x="110" y="525.6953"/><rect fill="none" height="367.9375" style="stroke:#000000;stroke-width:1.5;" width="313" x="120" y="636.2266"/><rect fill="none" height="116.2031" style="stroke:#000000;stroke-width:1.5;" width="155" x="268" y="831.0234"/><rect fill="none" height="109.2031" style="stroke:#000000;stroke-width:1.5;" width="176" x="248" y="1060.2969"/><rect fill="none" height="130.5313" style="stroke:#000000;stroke-width:1.5;" width="265" x="120" y="1190.5"/><rect fill="none" height="247.9297" style="stroke:#000000;stroke-width:1.5;" width="230" x="110" y="1335.0313"/><rect fill="none" height="172.6641" style="stroke:#000000;stroke-width:1.5;" width="210" x="120" y="1359.1641"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="39" x2="39" y1="81.2969" y2="1599.9609"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="153" x2="153" y1="81.2969" y2="1599.9609"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="299" x2="299" y1="81.2969" y2="1599.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="20" y="77.9951">User</text><ellipse cx="39" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M39,21.5 L39,48.5 M26,29.5 L52,29.5 M39,48.5 L26,63.5 M39,48.5 L52,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="20" y="1611.9561">User</text><ellipse cx="39" cy="1623.7578" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M39,1631.7578 L39,1658.7578 M26,1639.7578 L52,1639.7578 M39,1658.7578 L26,1673.7578 M39,1658.7578 L52,1673.7578 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="46" x="130" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="137" y="69.9951">Alice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="46" x="130" y="1598.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="137" y="1618.9561">Alice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="42" x="278" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="285" y="69.9951">Bob</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="42" x="278" y="1598.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="285" y="1618.9561">Bob</text><path d="M120,98.2969 L220,98.2969 L220,105.4297 L210,115.4297 L120,115.4297 L120,98.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="59.2656" style="stroke:#000000;stroke-width:1.5;" width="129" x="120" y="98.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="55" x="135" y="111.3638">Startup</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="136.5625" y2="136.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="136.5625" y2="149.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="149.5625" y2="149.5625"/><polygon fill="#181818" points="164,145.5625,154,149.5625,164,153.5625,160,149.5625" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="160" y="131.4966">Generate ID</text><path d="M10,171.5625 L138,171.5625 L138,178.6953 L128,188.6953 L10,188.6953 L10,171.5625 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="340.1328" style="stroke:#000000;stroke-width:1.5;" width="330" x="10" y="171.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="83" x="25" y="184.6294">User action</text><polygon fill="#181818" points="141,205.8281,151,209.8281,141,213.8281,145,209.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="39" x2="147" y1="209.8281" y2="209.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="46" y="204.7622">Button1 press</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="254.0938" y2="254.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="254.0938" y2="267.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="267.0938" y2="267.0938"/><polygon fill="#181818" points="164,263.0938,154,267.0938,164,271.0938,160,267.0938" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="160" y="233.895">Check if</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="160" y="249.0278">holding LED1</text><path d="M102,282.0938 L166,282.0938 L166,289.2266 L156,299.2266 L102,299.2266 L102,282.0938 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="222.6016" style="stroke:#000000;stroke-width:1.5;" width="228" x="102" y="282.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="117" y="295.1606">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="71" x="181" y="294.3042">[Holding 1]</text><path d="M112,304.2266 L112,329.2266 L194,329.2266 L194,314.2266 L184,304.2266 L112,304.2266 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M184,304.2266 L184,314.2266 L194,314.2266 L184,304.2266 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="118" y="321.2935">No action</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="102" x2="330" y1="335.3594" y2="335.3594"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="96" x="107" y="345.5698">[Not holding 1]</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="370.2969" y2="370.2969"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="370.2969" y2="383.2969"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="383.2969" y2="383.2969"/><polygon fill="#181818" points="164,379.2969,154,383.2969,164,387.2969,160,383.2969" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="160" y="365.231">Switch to TX</text><polygon fill="#181818" points="287,408.4297,297,412.4297,287,416.4297,291,412.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="293" y1="412.4297" y2="412.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="160" y="407.3638">LED req(IDa, LED1)</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="441.5625" y2="441.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="441.5625" y2="454.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="454.5625" y2="454.5625"/><polygon fill="#181818" points="164,450.5625,154,454.5625,164,458.5625,160,454.5625" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="160" y="436.4966">Switch to RX</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="483.6953" y2="483.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="483.6953" y2="496.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="496.6953" y2="496.6953"/><polygon fill="#181818" points="164,492.6953,154,496.6953,164,500.6953,160,496.6953" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="160" y="478.6294">Begin timer</text><path d="M110,525.6953 L332,525.6953 L332,532.8281 L322,542.8281 L110,542.8281 L110,525.6953 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="650.8047" style="stroke:#000000;stroke-width:1.5;" width="345" x="110" y="525.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="177" x="125" y="538.7622">Holder receives request</text><polygon fill="#181818" points="287,559.9609,297,563.9609,287,567.9609,291,563.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="293" y1="563.9609" y2="563.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="160" y="558.895">LED req(IDa, LED1)</text><line style="stroke:#181818;stroke-width:1.0;" x1="299" x2="341" y1="608.2266" y2="608.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="341" x2="341" y1="608.2266" y2="621.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="300" x2="341" y1="621.2266" y2="621.2266"/><polygon fill="#181818" points="310,617.2266,300,621.2266,310,625.2266,306,621.2266" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="306" y="588.0278">Check if</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="306" y="603.1606">holding LED1</text><path d="M120,636.2266 L184,636.2266 L184,643.3594 L174,653.3594 L120,653.3594 L120,636.2266 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="367.9375" style="stroke:#000000;stroke-width:1.5;" width="313" x="120" y="636.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="135" y="649.2935">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="71" x="199" y="648.437">[Holding 1]</text><line style="stroke:#181818;stroke-width:1.0;" x1="299" x2="341" y1="674.4922" y2="674.4922"/><line style="stroke:#181818;stroke-width:1.0;" x1="341" x2="341" y1="674.4922" y2="687.4922"/><line style="stroke:#181818;stroke-width:1.0;" x1="300" x2="341" y1="687.4922" y2="687.4922"/><polygon fill="#181818" points="310,683.4922,300,687.4922,310,691.4922,306,687.4922" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="306" y="669.4263">LED1 off</text><line style="stroke:#181818;stroke-width:1.0;" x1="299" x2="341" y1="716.625" y2="716.625"/><line style="stroke:#181818;stroke-width:1.0;" x1="341" x2="341" y1="716.625" y2="729.625"/><line style="stroke:#181818;stroke-width:1.0;" x1="300" x2="341" y1="729.625" y2="729.625"/><polygon fill="#181818" points="310,725.625,300,729.625,310,733.625,306,729.625" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="306" y="711.5591">Switch to TX</text><polygon fill="#181818" points="164,754.7578,154,758.7578,164,762.7578,160,758.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="158" x2="298" y1="758.7578" y2="758.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="170" y="753.6919">LED res(IDa, LED1)</text><line style="stroke:#181818;stroke-width:1.0;" x1="299" x2="341" y1="803.0234" y2="803.0234"/><line style="stroke:#181818;stroke-width:1.0;" x1="341" x2="341" y1="803.0234" y2="816.0234"/><line style="stroke:#181818;stroke-width:1.0;" x1="300" x2="341" y1="816.0234" y2="816.0234"/><polygon fill="#181818" points="310,812.0234,300,816.0234,310,820.0234,306,816.0234" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="306" y="782.8247">Check if</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="306" y="797.9575">holding LED2</text><path d="M268,831.0234 L332,831.0234 L332,838.1563 L322,848.1563 L268,848.1563 L268,831.0234 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="116.2031" style="stroke:#000000;stroke-width:1.5;" width="155" x="268" y="831.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="283" y="844.0903">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="71" x="347" y="843.2339">[Holding 2]</text><line style="stroke:#181818;stroke-width:1.0;" x1="299" x2="341" y1="869.2891" y2="869.2891"/><line style="stroke:#181818;stroke-width:1.0;" x1="341" x2="341" y1="869.2891" y2="882.2891"/><line style="stroke:#181818;stroke-width:1.0;" x1="300" x2="341" y1="882.2891" y2="882.2891"/><polygon fill="#181818" points="310,878.2891,300,882.2891,310,886.2891,306,882.2891" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="306" y="864.2231">Switch to RX</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="268" x2="423" y1="891.2891" y2="891.2891"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="112" x="273" y="901.4995">[Holding nothing]</text><line style="stroke:#181818;stroke-width:1.0;" x1="299" x2="341" y1="926.2266" y2="926.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="341" x2="341" y1="926.2266" y2="939.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="300" x2="341" y1="939.2266" y2="939.2266"/><polygon fill="#181818" points="310,935.2266,300,939.2266,310,943.2266,306,939.2266" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="306" y="921.1606">Disable radio</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="120" x2="433" y1="955.2266" y2="955.2266"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="96" x="125" y="965.437">[Not holding 1]</text><path d="M258,974.0313 L258,999.0313 L340,999.0313 L340,984.0313 L330,974.0313 L258,974.0313 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M330,974.0313 L330,984.0313 L340,984.0313 L330,974.0313 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="264" y="991.0981">No action</text><line style="stroke:#181818;stroke-width:1.0;" x1="299" x2="341" y1="1032.2969" y2="1032.2969"/><line style="stroke:#181818;stroke-width:1.0;" x1="341" x2="341" y1="1032.2969" y2="1045.2969"/><line style="stroke:#181818;stroke-width:1.0;" x1="300" x2="341" y1="1045.2969" y2="1045.2969"/><polygon fill="#181818" points="310,1041.2969,300,1045.2969,310,1049.2969,306,1045.2969" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="306" y="1027.231">Compare IDa and IDb</text><path d="M248,1060.2969 L312,1060.2969 L312,1067.4297 L302,1077.4297 L248,1077.4297 L248,1060.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="109.2031" style="stroke:#000000;stroke-width:1.5;" width="176" x="248" y="1060.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="263" y="1073.3638">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="78" x="327" y="1072.5073">[IDa == IDb]</text><line style="stroke:#181818;stroke-width:1.0;" x1="299" x2="341" y1="1098.5625" y2="1098.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="341" x2="341" y1="1098.5625" y2="1111.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="300" x2="341" y1="1111.5625" y2="1111.5625"/><polygon fill="#181818" points="310,1107.5625,300,1111.5625,310,1115.5625,306,1111.5625" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="306" y="1093.4966">Generate new ID</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="248" x2="424" y1="1120.5625" y2="1120.5625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="74" x="253" y="1130.7729">[IDa != IDb]</text><path d="M258,1139.3672 L258,1164.3672 L340,1164.3672 L340,1149.3672 L330,1139.3672 L258,1139.3672 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M330,1139.3672 L330,1149.3672 L340,1149.3672 L330,1139.3672 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="264" y="1156.4341">No action</text><path d="M120,1190.5 L380,1190.5 L380,1197.6328 L370,1207.6328 L120,1207.6328 L120,1190.5 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="130.5313" style="stroke:#000000;stroke-width:1.5;" width="265" x="120" y="1190.5"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="215" x="135" y="1203.5669">Requester receives response</text><polygon fill="#181818" points="164,1224.7656,154,1228.7656,164,1232.7656,160,1228.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="158" x2="298" y1="1228.7656" y2="1228.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="170" y="1223.6997">LED res(IDa, LED1)</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1257.8984" y2="1257.8984"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1257.8984" y2="1270.8984"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1270.8984" y2="1270.8984"/><polygon fill="#181818" points="164,1266.8984,154,1270.8984,164,1274.8984,160,1270.8984" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="160" y="1252.8325">Switch to RX</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1300.0313" y2="1300.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1300.0313" y2="1313.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1313.0313" y2="1313.0313"/><polygon fill="#181818" points="164,1309.0313,154,1313.0313,164,1317.0313,160,1313.0313" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="160" y="1294.9653">LED1 on</text><path d="M110,1335.0313 L187,1335.0313 L187,1342.1641 L177,1352.1641 L110,1352.1641 L110,1335.0313 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="247.9297" style="stroke:#000000;stroke-width:1.5;" width="230" x="110" y="1335.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="32" x="125" y="1348.0981">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="25" x="202" y="1347.2417">[x3]</text><path d="M120,1359.1641 L268,1359.1641 L268,1366.2969 L258,1376.2969 L120,1376.2969 L120,1359.1641 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="172.6641" style="stroke:#000000;stroke-width:1.5;" width="210" x="120" y="1359.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="103" x="135" y="1372.231">Timer timeout</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1397.4297" y2="1397.4297"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1397.4297" y2="1410.4297"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1410.4297" y2="1410.4297"/><polygon fill="#181818" points="164,1406.4297,154,1410.4297,164,1414.4297,160,1410.4297" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="160" y="1392.3638">Switch to TX</text><polygon fill="#181818" points="287,1435.5625,297,1439.5625,287,1443.5625,291,1439.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="293" y1="1439.5625" y2="1439.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="160" y="1434.4966">LED req(IDa, LED1)</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1468.6953" y2="1468.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1468.6953" y2="1481.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1481.6953" y2="1481.6953"/><polygon fill="#181818" points="164,1477.6953,154,1481.6953,164,1485.6953,160,1481.6953" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="160" y="1463.6294">Switch to RX</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1510.8281" y2="1510.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1510.8281" y2="1523.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1523.8281" y2="1523.8281"/><polygon fill="#181818" points="164,1519.8281,154,1523.8281,164,1527.8281,160,1523.8281" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="160" y="1505.7622">Begin timer</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="110" x2="340" y1="1539.8281" y2="1539.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1561.9609" y2="1561.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1561.9609" y2="1574.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1574.9609" y2="1574.9609"/><polygon fill="#181818" points="164,1570.9609,154,1574.9609,164,1578.9609,160,1574.9609" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="160" y="1556.895">LED1 on</text><!--MD5=[d794293cb4abd4ddf61018d7a94e670e]
@startuml sequence-diagram

actor User
participant Alice as a
participant Bob as b

group Startup
    a -> a: Generate ID
end

group User action
    User -> a: Button1 press
    a -> a: Check if\nholding LED1

    alt Holding 1
        note over a: No action
    else Not holding 1
        a -> a: Switch to TX
        a -> b: LED req(IDa, LED1)
        a -> a: Switch to RX
        a -> a: Begin timer
    end

end

group Holder receives request
    a -> b: LED req(IDa, LED1)
    b -> b: Check if\nholding LED1

    alt Holding 1
        b -> b: LED1 off
        b -> b: Switch to TX
        b -> a: LED res(IDa, LED1)
        b -> b: Check if\nholding LED2

        alt Holding 2
            b -> b: Switch to RX
        else Holding nothing
            b -> b: Disable radio
        end

    else Not holding 1
        note over b: No action
    end

    b -> b: Compare IDa and IDb

    alt IDa == IDb
        b -> b: Generate new ID
    else IDa != IDb
        note over b: No action
    end

end

group Requester receives response
    b -> a: LED res(IDa, LED1)
    a -> a: Switch to RX
    a -> a: LED1 on
end

loop x3

    group Timer timeout
        a -> a: Switch to TX
        a -> b: LED req(IDa, LED1)
        a -> a: Switch to RX
        a -> a: Begin timer
    end

else
    a -> a: LED1 on
end

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>