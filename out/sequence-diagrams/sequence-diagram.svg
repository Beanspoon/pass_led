<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1974px" preserveAspectRatio="none" style="width:528px;height:1974px;background:#FFFFFF;" version="1.1" viewBox="0 0 528 1974" width="528px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="116.5313" style="stroke:#000000;stroke-width:1.5;" width="165.5" x="99.5" y="98.2969"/><rect fill="none" height="340.1328" style="stroke:#000000;stroke-width:1.5;" width="342.5" x="10" y="228.8281"/><rect fill="none" height="222.6016" style="stroke:#000000;stroke-width:1.5;" width="243" x="99.5" y="339.3594"/><rect fill="none" height="505.4688" style="stroke:#000000;stroke-width:1.5;" width="369.5" x="89.5" y="582.9609"/><rect fill="none" height="222.6016" style="stroke:#000000;stroke-width:1.5;" width="300.5" x="99.5" y="693.4922"/><rect fill="none" height="109.2031" style="stroke:#000000;stroke-width:1.5;" width="176" x="252" y="972.2266"/><rect fill="none" height="172.6641" style="stroke:#000000;stroke-width:1.5;" width="265" x="99.5" y="1102.4297"/><rect fill="none" height="332.1953" style="stroke:#000000;stroke-width:1.5;" width="263" x="89.5" y="1289.0938"/><rect fill="none" height="301.0625" style="stroke:#000000;stroke-width:1.5;" width="243" x="99.5" y="1313.2266"/><rect fill="none" height="240.9297" style="stroke:#000000;stroke-width:1.5;" width="432.5" x="89.5" y="1635.2891"/><rect fill="none" height="96.3984" style="stroke:#000000;stroke-width:1.5;" width="178.5" x="99.5" y="1772.8203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="39" x2="39" y1="81.2969" y2="1893.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="152.5" x2="152.5" y1="81.2969" y2="1893.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="302.5" x2="302.5" y1="81.2969" y2="1893.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="454" x2="454" y1="81.2969" y2="1893.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="20" y="77.9951">User</text><ellipse cx="39" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M39,21.5 L39,48.5 M26,29.5 L52,29.5 M39,48.5 L26,63.5 M39,48.5 L52,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="20" y="1905.2139">User</text><ellipse cx="39" cy="1917.0156" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M39,1925.0156 L39,1952.0156 M26,1933.0156 L52,1933.0156 M39,1952.0156 L26,1967.0156 M39,1952.0156 L52,1967.0156 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87" x="109.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="116.5" y="69.9951">Requester</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87" x="109.5" y="1892.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="116.5" y="1912.2139">Requester</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="59" x="273.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="280.5" y="69.9951">Holder</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="59" x="273.5" y="1892.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="280.5" y="1912.2139">Holder</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="396" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="403" y="69.9951">2nd_requester</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="396" y="1892.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="403" y="1912.2139">2nd_requester</text><path d="M99.5,98.2969 L199.5,98.2969 L199.5,105.4297 L189.5,115.4297 L99.5,115.4297 L99.5,98.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="116.5313" style="stroke:#000000;stroke-width:1.5;" width="165.5" x="99.5" y="98.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="55" x="114.5" y="111.3638">Startup</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="136.5625" y2="136.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="136.5625" y2="149.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="149.5625" y2="149.5625"/><polygon fill="#181818" points="164,145.5625,154,149.5625,164,153.5625,160,149.5625" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="160" y="131.4966">Generate ID</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="193.8281" y2="193.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="193.8281" y2="206.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="206.8281" y2="206.8281"/><polygon fill="#181818" points="164,202.8281,154,206.8281,164,210.8281,160,206.8281" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="160" y="173.6294">Ramp up radio</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="160" y="188.7622">in RX</text><path d="M10,228.8281 L138,228.8281 L138,235.9609 L128,245.9609 L10,245.9609 L10,228.8281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="340.1328" style="stroke:#000000;stroke-width:1.5;" width="342.5" x="10" y="228.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="83" x="25" y="241.895">User action</text><polygon fill="#181818" points="141,263.0938,151,267.0938,141,271.0938,145,267.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="39" x2="147" y1="267.0938" y2="267.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="46" y="262.0278">Button1 press</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="311.3594" y2="311.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="311.3594" y2="324.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="324.3594" y2="324.3594"/><polygon fill="#181818" points="164,320.3594,154,324.3594,164,328.3594,160,324.3594" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="160" y="291.1606">Check if</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="160" y="306.2935">holding LED1</text><path d="M99.5,339.3594 L163.5,339.3594 L163.5,346.4922 L153.5,356.4922 L99.5,356.4922 L99.5,339.3594 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="222.6016" style="stroke:#000000;stroke-width:1.5;" width="243" x="99.5" y="339.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="114.5" y="352.4263">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="71" x="178.5" y="351.5698">[Holding 1]</text><path d="M112,361.4922 L112,386.4922 L194,386.4922 L194,371.4922 L184,361.4922 L112,361.4922 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M184,361.4922 L184,371.4922 L194,371.4922 L184,361.4922 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="118" y="378.5591">No action</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="99.5" x2="342.5" y1="392.625" y2="392.625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="96" x="104.5" y="402.8354">[Not holding 1]</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="427.5625" y2="427.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="427.5625" y2="440.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="440.5625" y2="440.5625"/><polygon fill="#181818" points="164,436.5625,154,440.5625,164,444.5625,160,440.5625" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="160" y="422.4966">Switch to TX</text><polygon fill="#181818" points="291,465.6953,301,469.6953,291,473.6953,295,469.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="297" y1="469.6953" y2="469.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="160" y="464.6294">LED req(IDa, LED1)</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="498.8281" y2="498.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="498.8281" y2="511.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="511.8281" y2="511.8281"/><polygon fill="#181818" points="164,507.8281,154,511.8281,164,515.8281,160,511.8281" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="160" y="493.7622">Switch to RX</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="540.9609" y2="540.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="540.9609" y2="553.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="553.9609" y2="553.9609"/><polygon fill="#181818" points="164,549.9609,154,553.9609,164,557.9609,160,553.9609" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="160" y="535.895">Begin timer</text><path d="M89.5,582.9609 L311.5,582.9609 L311.5,590.0938 L301.5,600.0938 L89.5,600.0938 L89.5,582.9609 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="505.4688" style="stroke:#000000;stroke-width:1.5;" width="369.5" x="89.5" y="582.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="177" x="104.5" y="596.0278">Holder receives request</text><polygon fill="#181818" points="291,617.2266,301,621.2266,291,625.2266,295,621.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="297" y1="621.2266" y2="621.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="160" y="616.1606">LED req(IDa, LED1)</text><line style="stroke:#181818;stroke-width:1.0;" x1="303" x2="345" y1="665.4922" y2="665.4922"/><line style="stroke:#181818;stroke-width:1.0;" x1="345" x2="345" y1="665.4922" y2="678.4922"/><line style="stroke:#181818;stroke-width:1.0;" x1="304" x2="345" y1="678.4922" y2="678.4922"/><polygon fill="#181818" points="314,674.4922,304,678.4922,314,682.4922,310,678.4922" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="310" y="645.2935">Check if</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="310" y="660.4263">holding LED1</text><path d="M99.5,693.4922 L163.5,693.4922 L163.5,700.625 L153.5,710.625 L99.5,710.625 L99.5,693.4922 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="222.6016" style="stroke:#000000;stroke-width:1.5;" width="300.5" x="99.5" y="693.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="114.5" y="706.5591">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="71" x="178.5" y="705.7026">[Holding 1]</text><line style="stroke:#181818;stroke-width:1.0;" x1="303" x2="345" y1="731.7578" y2="731.7578"/><line style="stroke:#181818;stroke-width:1.0;" x1="345" x2="345" y1="731.7578" y2="744.7578"/><line style="stroke:#181818;stroke-width:1.0;" x1="304" x2="345" y1="744.7578" y2="744.7578"/><polygon fill="#181818" points="314,740.7578,304,744.7578,314,748.7578,310,744.7578" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="310" y="726.6919">LED1 off</text><line style="stroke:#181818;stroke-width:1.0;" x1="303" x2="345" y1="773.8906" y2="773.8906"/><line style="stroke:#181818;stroke-width:1.0;" x1="345" x2="345" y1="773.8906" y2="786.8906"/><line style="stroke:#181818;stroke-width:1.0;" x1="304" x2="345" y1="786.8906" y2="786.8906"/><polygon fill="#181818" points="314,782.8906,304,786.8906,314,790.8906,310,786.8906" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="310" y="768.8247">Switch to TX</text><polygon fill="#181818" points="164,812.0234,154,816.0234,164,820.0234,160,816.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="158" x2="302" y1="816.0234" y2="816.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="170" y="810.9575">LED res(IDa, LED1)</text><line style="stroke:#181818;stroke-width:1.0;" x1="303" x2="345" y1="845.1563" y2="845.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="345" x2="345" y1="845.1563" y2="858.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="304" x2="345" y1="858.1563" y2="858.1563"/><polygon fill="#181818" points="314,854.1563,304,858.1563,314,862.1563,310,858.1563" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="310" y="840.0903">Switch to RX</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="99.5" x2="400" y1="867.1563" y2="867.1563"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="96" x="104.5" y="877.3667">[Not holding 1]</text><path d="M262,885.9609 L262,910.9609 L344,910.9609 L344,895.9609 L334,885.9609 L262,885.9609 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M334,885.9609 L334,895.9609 L344,895.9609 L334,885.9609 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="268" y="903.0278">No action</text><line style="stroke:#181818;stroke-width:1.0;" x1="303" x2="345" y1="944.2266" y2="944.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="345" x2="345" y1="944.2266" y2="957.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="304" x2="345" y1="957.2266" y2="957.2266"/><polygon fill="#181818" points="314,953.2266,304,957.2266,314,961.2266,310,957.2266" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="310" y="939.1606">Compare IDa and IDb</text><path d="M252,972.2266 L316,972.2266 L316,979.3594 L306,989.3594 L252,989.3594 L252,972.2266 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="109.2031" style="stroke:#000000;stroke-width:1.5;" width="176" x="252" y="972.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="267" y="985.2935">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="78" x="331" y="984.437">[IDa == IDb]</text><line style="stroke:#181818;stroke-width:1.0;" x1="303" x2="345" y1="1010.4922" y2="1010.4922"/><line style="stroke:#181818;stroke-width:1.0;" x1="345" x2="345" y1="1010.4922" y2="1023.4922"/><line style="stroke:#181818;stroke-width:1.0;" x1="304" x2="345" y1="1023.4922" y2="1023.4922"/><polygon fill="#181818" points="314,1019.4922,304,1023.4922,314,1027.4922,310,1023.4922" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="310" y="1005.4263">Generate new ID</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="252" x2="428" y1="1032.4922" y2="1032.4922"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="74" x="257" y="1042.7026">[IDa != IDb]</text><path d="M262,1051.2969 L262,1076.2969 L344,1076.2969 L344,1061.2969 L334,1051.2969 L262,1051.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M334,1051.2969 L334,1061.2969 L344,1061.2969 L334,1051.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="268" y="1068.3638">No action</text><path d="M99.5,1102.4297 L359.5,1102.4297 L359.5,1109.5625 L349.5,1119.5625 L99.5,1119.5625 L99.5,1102.4297 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="172.6641" style="stroke:#000000;stroke-width:1.5;" width="265" x="99.5" y="1102.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="215" x="114.5" y="1115.4966">Requester receives response</text><polygon fill="#181818" points="164,1136.6953,154,1140.6953,164,1144.6953,160,1140.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="158" x2="302" y1="1140.6953" y2="1140.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="170" y="1135.6294">LED res(IDa, LED1)</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1169.8281" y2="1169.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1169.8281" y2="1182.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1182.8281" y2="1182.8281"/><polygon fill="#181818" points="164,1178.8281,154,1182.8281,164,1186.8281,160,1182.8281" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="160" y="1164.7622">LED1 on</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1211.9609" y2="1211.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1211.9609" y2="1224.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1224.9609" y2="1224.9609"/><polygon fill="#181818" points="164,1220.9609,154,1224.9609,164,1228.9609,160,1224.9609" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="160" y="1206.895">Cancel timer</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1254.0938" y2="1254.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1254.0938" y2="1267.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1267.0938" y2="1267.0938"/><polygon fill="#181818" points="164,1263.0938,154,1267.0938,164,1271.0938,160,1267.0938" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="160" y="1249.0278">Reset retries</text><path d="M89.5,1289.0938 L237.5,1289.0938 L237.5,1296.2266 L227.5,1306.2266 L89.5,1306.2266 L89.5,1289.0938 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="332.1953" style="stroke:#000000;stroke-width:1.5;" width="263" x="89.5" y="1289.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="103" x="104.5" y="1302.1606">Timer timeout</text><path d="M99.5,1313.2266 L163.5,1313.2266 L163.5,1320.3594 L153.5,1330.3594 L99.5,1330.3594 L99.5,1313.2266 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="301.0625" style="stroke:#000000;stroke-width:1.5;" width="243" x="99.5" y="1313.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="114.5" y="1326.2935">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="80" x="178.5" y="1325.437">[Retries &lt; 3]</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1351.4922" y2="1351.4922"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1351.4922" y2="1364.4922"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1364.4922" y2="1364.4922"/><polygon fill="#181818" points="164,1360.4922,154,1364.4922,164,1368.4922,160,1364.4922" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="160" y="1346.4263">Switch to TX</text><polygon fill="#181818" points="291,1389.625,301,1393.625,291,1397.625,295,1393.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="297" y1="1393.625" y2="1393.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="160" y="1388.5591">LED req(IDa, LED1)</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1422.7578" y2="1422.7578"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1422.7578" y2="1435.7578"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1435.7578" y2="1435.7578"/><polygon fill="#181818" points="164,1431.7578,154,1435.7578,164,1439.7578,160,1435.7578" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="160" y="1417.6919">Switch to RX</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1464.8906" y2="1464.8906"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1464.8906" y2="1477.8906"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1477.8906" y2="1477.8906"/><polygon fill="#181818" points="164,1473.8906,154,1477.8906,164,1481.8906,160,1477.8906" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="160" y="1459.8247">Begin timer</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1507.0234" y2="1507.0234"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1507.0234" y2="1520.0234"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1520.0234" y2="1520.0234"/><polygon fill="#181818" points="164,1516.0234,154,1520.0234,164,1524.0234,160,1520.0234" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="160" y="1501.9575">Increment retries</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="99.5" x2="342.5" y1="1529.0234" y2="1529.0234"/><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1551.1563" y2="1551.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1551.1563" y2="1564.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1564.1563" y2="1564.1563"/><polygon fill="#181818" points="164,1560.1563,154,1564.1563,164,1568.1563,160,1564.1563" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="160" y="1546.0903">LED1 on</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1593.2891" y2="1593.2891"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1593.2891" y2="1606.2891"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1606.2891" y2="1606.2891"/><polygon fill="#181818" points="164,1602.2891,154,1606.2891,164,1610.2891,160,1606.2891" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="160" y="1588.2231">Reset retries</text><path d="M89.5,1635.2891 L395.5,1635.2891 L395.5,1642.4219 L385.5,1652.4219 L89.5,1652.4219 L89.5,1635.2891 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="240.9297" style="stroke:#000000;stroke-width:1.5;" width="432.5" x="89.5" y="1635.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="261" x="104.5" y="1648.356">Requester detects another request</text><polygon fill="#181818" points="164,1669.5547,154,1673.5547,164,1677.5547,160,1673.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="158" x2="453" y1="1673.5547" y2="1673.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="170" y="1668.4888">LED req(IDc, LED1)</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1702.6875" y2="1702.6875"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1702.6875" y2="1715.6875"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1715.6875" y2="1715.6875"/><polygon fill="#181818" points="164,1711.6875,154,1715.6875,164,1719.6875,160,1715.6875" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="160" y="1697.6216">Drop request</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1744.8203" y2="1744.8203"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1744.8203" y2="1757.8203"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1757.8203" y2="1757.8203"/><polygon fill="#181818" points="164,1753.8203,154,1757.8203,164,1761.8203,160,1757.8203" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="160" y="1739.7544">Compare IDa and IDc</text><path d="M99.5,1772.8203 L163.5,1772.8203 L163.5,1779.9531 L153.5,1789.9531 L99.5,1789.9531 L99.5,1772.8203 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="96.3984" style="stroke:#000000;stroke-width:1.5;" width="178.5" x="99.5" y="1772.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="114.5" y="1785.8872">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77" x="178.5" y="1785.0308">[IDa == IDc]</text><line style="stroke:#181818;stroke-width:1.0;" x1="153" x2="195" y1="1811.0859" y2="1811.0859"/><line style="stroke:#181818;stroke-width:1.0;" x1="195" x2="195" y1="1811.0859" y2="1824.0859"/><line style="stroke:#181818;stroke-width:1.0;" x1="154" x2="195" y1="1824.0859" y2="1824.0859"/><polygon fill="#181818" points="164,1820.0859,154,1824.0859,164,1828.0859,160,1824.0859" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="160" y="1806.02">Generate new ID</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="99.5" x2="278" y1="1833.0859" y2="1833.0859"/><path d="M112,1839.0859 L112,1864.0859 L194,1864.0859 L194,1849.0859 L184,1839.0859 L112,1839.0859 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M184,1839.0859 L184,1849.0859 L194,1849.0859 L184,1839.0859 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="118" y="1856.1528">No action</text><!--MD5=[4526fb236d1d72eed1d8e3c07564f631]
@startuml sequence-diagram

actor User
participant Requester as a
participant Holder as b
participant 2nd_requester as c

group Startup
    a -> a: Generate ID
    a -> a: Ramp up radio\nin RX
end

group User action
    User -> a: Button1 press
    a -> a: Check if\nholding LED1

    alt Holding 1
        note over a: No action
    else Not holding 1
        a -> a: Switch to TX
        a -> b: LED req(IDa, LED1)
        a -> a: Switch to RX
        a -> a: Begin timer
    end

end

group Holder receives request
    a -> b: LED req(IDa, LED1)
    b -> b: Check if\nholding LED1

    alt Holding 1
        b -> b: LED1 off
        b -> b: Switch to TX
        b -> a: LED res(IDa, LED1)
        b -> b: Switch to RX
    else Not holding 1
        note over b: No action
    end

    b -> b: Compare IDa and IDb

    alt IDa == IDb
        b -> b: Generate new ID
    else IDa != IDb
        note over b: No action
    end

end

group Requester receives response
    b -> a: LED res(IDa, LED1)
    a -> a: LED1 on
    a -> a: Cancel timer
    a -> a: Reset retries
end

group Timer timeout

    alt Retries < 3
        a -> a: Switch to TX
        a -> b: LED req(IDa, LED1)
        a -> a: Switch to RX
        a -> a: Begin timer
        a -> a: Increment retries
    else
        a -> a: LED1 on
        a -> a: Reset retries
    end
    
end

group Requester detects another request
    c -> a: LED req(IDc, LED1)
    a -> a: Drop request
    a -> a: Compare IDa and IDc

    alt IDa == IDc
        a -> a: Generate new ID
    else
        note over a: No action
    end

end

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>